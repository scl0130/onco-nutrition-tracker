<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>OncoNutrition Tracker</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;600;700;800&family=Source+Serif+4:opsz,wght@8..60,500;8..60,700&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <main class="page">
      <header class="hero">
        <p class="eyebrow">MVP Website</p>
        <h1>OncoNutrition Tracker</h1>
        <p class="lead">
          Diet and macro tracking support for the 10 most common cancers in the U.S., with treatment-state specific recommendations and transparent citations.
        </p>
      </header>

      <section class="card">
        <h2>Hello</h2>
        <p class="muted">
          Enter your profile so the app can personalize your macro targets.
        </p>
        <form id="profileForm" class="grid form-grid">
          <label>Name <input type="text" id="profileName" placeholder="Optional" /></label>
          <label>
            Gender
            <select id="profileGender" required>
              <option value="female">Female</option>
              <option value="male">Male</option>
            </select>
          </label>
          <label>Age <input type="number" min="18" max="120" id="profileAge" required /></label>
          <label>
            Height unit
            <select id="profileHeightUnit">
              <option value="cm">Centimeters (cm)</option>
              <option value="ftin">Feet + inches (ft/in)</option>
            </select>
          </label>
          <label id="heightCmWrap">Height (cm) <input type="number" min="100" max="250" id="profileHeightCm" required /></label>
          <label id="heightFtWrap" class="hidden">Height (ft) <input type="number" min="3" max="8" id="profileHeightFt" /></label>
          <label id="heightInWrap" class="hidden">Height (in) <input type="number" min="0" max="11" id="profileHeightIn" /></label>
          <label>
            Weight unit
            <select id="profileWeightUnit">
              <option value="kg">Kilograms (kg)</option>
              <option value="lb">Pounds (lb)</option>
            </select>
          </label>
          <label id="weightKgWrap">Weight (kg) <input type="number" min="30" max="300" id="profileWeightKg" required /></label>
          <label id="weightLbWrap" class="hidden">Weight (lb) <input type="number" min="66" max="660" id="profileWeightLb" /></label>
          <label>
            Activity level
            <select id="profileActivity" required>
              <option value="1.2">Low / mostly sedentary</option>
              <option value="1.375">Light activity (1-3 days/week)</option>
              <option value="1.55">Moderate activity (3-5 days/week)</option>
              <option value="1.725">Very active (6-7 days/week)</option>
            </select>
          </label>
          <button type="submit">Save profile and personalize macros</button>
        </form>
        <div id="profileSummary" class="summary compact"></div>
      </section>

      <section class="disclaimer" aria-label="Medical disclaimer">
        <h2>Medical Disclaimer</h2>
        <p>
          This tool provides educational recommendations only and is not medical advice. Patients should consult their oncologist, renal team,
          and registered dietitian before changing diet, supplements, fluid intake, or macro targets.
        </p>
      </section>

      <section class="card">
        <h2>Patient Context</h2>
        <div class="grid">
          <label>
            Cancer type
            <select id="cancerSelect"></select>
          </label>

          <fieldset>
            <legend>Chemotherapy status</legend>
            <label><input type="radio" name="chemoStatus" value="on" checked /> On chemo</label>
            <label><input type="radio" name="chemoStatus" value="off" /> Off chemo</label>
          </fieldset>

          <fieldset id="dialysisField" class="hidden">
            <legend>Dialysis status (Kidney only)</legend>
            <label><input type="radio" name="dialysisStatus" value="off" checked /> Off dialysis</label>
            <label><input type="radio" name="dialysisStatus" value="on" /> On dialysis</label>
          </fieldset>
        </div>
      </section>

      <section class="card">
        <h2>Recommendations</h2>
        <div id="recommendationMeta" class="meta"></div>
        <div id="recommendationList" class="recommendations"></div>
      </section>

      <section class="card">
        <h2>Macro Tracker</h2>
        <p class="muted">
          Targets are customizable and should be set with your care team.
        </p>

        <form id="targetForm" class="grid form-grid">
          <label>Calories target <input type="number" min="0" id="targetCalories" required /></label>
          <label>Protein target (g) <input type="number" min="0" step="0.01" id="targetProtein" required /></label>
          <label>Carbs target (g) <input type="number" min="0" step="0.01" id="targetCarbs" required /></label>
          <label>Fat target (g) <input type="number" min="0" step="0.01" id="targetFat" required /></label>
          <button type="submit">Save targets</button>
        </form>

        <form id="mealForm" class="grid form-grid">
          <label>Meal/Food <input type="text" id="mealName" list="oncologyFoodOptions" required /></label>
          <datalist id="oncologyFoodOptions"></datalist>
          <label>Serving size (g) <input type="number" min="1" id="mealServingGrams" value="100" required /></label>
          <button type="button" id="autofillFood">Autofill from food name</button>
          <label>Calories <input type="number" min="0" id="mealCalories" required /></label>
          <label>Protein (g) <input type="number" min="0" step="0.01" id="mealProtein" required /></label>
          <label>Carbs (g) <input type="number" min="0" step="0.01" id="mealCarbs" required /></label>
          <label>Fat (g) <input type="number" min="0" step="0.01" id="mealFat" required /></label>
          <button type="submit">Add entry</button>
        </form>
        <p id="foodLookupStatus" class="muted"></p>
        <p id="foodSafetyNote" class="muted"></p>

        <div id="macroSummary" class="summary"></div>
        <div id="mealList" class="meals"></div>
        <button id="clearEntries" class="danger" type="button">Clear today entries</button>
      </section>

      <section class="card">
        <h2>Food Library</h2>
        <p class="muted">
          Browse curated oncology-safe foods, filter by need, and send items directly to the tracker.
        </p>
        <form id="foodLibraryFilters" class="grid">
          <label>Search foods <input type="text" id="foodLibrarySearch" placeholder="ex: yogurt, chicken, oatmeal" /></label>
          <label>USDA API key (optional) <input type="password" id="usdaApiKey" placeholder="Uses DEMO_KEY if empty" /></label>
          <button type="button" id="saveUsdaApiKey">Save USDA key</button>
          <fieldset>
            <legend>Filter options</legend>
            <label><input type="checkbox" id="foodFilterHighProtein" /> High protein (>= 10g per 100g)</label>
            <label><input type="checkbox" id="foodFilterPlantBased" /> Plant-based</label>
            <label><input type="checkbox" id="foodFilterSoftTexture" /> Soft texture / easy to eat</label>
          </fieldset>
        </form>
        <p id="usdaApiKeyStatus" class="muted"></p>
        <p id="foodLibraryCount" class="muted"></p>
        <div id="foodLibraryResults" class="food-library"></div>
      </section>

      <section class="card">
        <h2>Evidence Sources</h2>
        <ul id="sourceList" class="sources"></ul>
      </section>
    </main>

    <script src="./recommendations.js"></script>
    <script src="./app.js"></script>
  </body>
</html>
